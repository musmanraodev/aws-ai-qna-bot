{
  "Resources": {},
  "Conditions": {},
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Creates and api interface for the admin ui. Handler is the main lambda and the Health lambda is connected to the health endpoint. the keeps the health endpoint logs from flooding the main lambdas logs",
  "Mappings": {},
  "Outputs": {
    "UserPoolUrl":{
        "Value":{"Fn::Join":["",[
            "https://console.aws.amazon.com/cognito/users/",
            "?region=",{"Ref":"AWS::Region"},
            "#/pool/",{"Ref":"UserPool"},"/details"
        ]]}
    },
    "Bucket":{
      "Value":{"Ref":"Bucket"}
    },
    "DesignerLogin": {
      "Value":{"Fn::Join":["",[
        {"Fn::GetAtt":["ApiUrl","Name"]},
        "/pages/designer"
      ]]}
    },
    "ClientUrl": {
        "Value":{"Fn::If":["Public",
            {"Fn::GetAtt":["Urls","Client"]},
            {"Fn::Join":["",[
                {"Fn::GetAtt":["ApiUrl","Name"]},
                "/pages/client"
            ]]}
        ]}
    },
    "ApiId":{
      "Value": {"Ref":"API"}
    },
    "UserPool":{
      "Value":{"Ref":"UserPool"}
    }
  },
  "Parameters": {
    "PublicOrPrivate":{
      "Type":"String",
      "AllowedPattern":"(PUBLIC|PRIVATE)",
      "ConstraintDescription":"Allowed Values are PUBLIC or PRIVATE"
    },
    "AllowUserSignUp":{
      "Type":"String",
      "AllowedPattern":"(FALSE|TRUE)",
      "ConstraintDescription":"Allowed Values are FALSE or TRUE",
      "Default":"FALSE"
    },
    "ApprovedDomain":{
      "Type":"String",
      "Default":"NONE"
    },
    "Botname":{
      "Type": "String"
    },
    "SlotType":{
      "Type": "String"
    },
    "Intent":{
      "Type": "String"
    },
    "Id":{
      "Type":"String",
      "Default":"QnA Bot"
    },
    "Username":{
        "Type":"String",
        "Default":"Admin"
    },
    "Email":{
      "Type": "String"
    },
    "BootstrapBucket":{
        "Type":"String"
    },
    "BootstrapPrefix":{
        "Type":"String"
    },
    "ESAddress": {
      "Type": "String"
    },
    "ESDomainArn": {
      "Type": "String"
    },
    "ESIndex": {
      "Type": "String"
    },
    "ESType": {
      "Type": "String"
    },
    "HandlerArn":{
      "Type":"String"
    }
  },
  "Conditions":{
    "Public":{"Fn::Equals":[{"Ref":"PublicOrPrivate"},"PUBLIC"]},
    "SignUp":{"Fn::Equals":[{"Ref":"AllowUserSignUp"},"TRUE"]},
    "Domain":{"Fn::Not":[
        {"Fn::Equals":[{"Ref":"ApprovedDomain"},"NONE"]}
    ]}
  }
}





